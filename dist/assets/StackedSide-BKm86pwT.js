import{r as k,i as f,j as t,a as g,b as T,H as E,S as R,d as H,D as M,e as C,u as v,f as w,h as L,k as A,l as V,m as O}from"./index-CUhViapa.js";import{L as U}from"./Logo-DIe6DqKa.js";import{M as p}from"./index-DzSnQDn4.js";import{S as I}from"./ScrollBar-DPcwfRun.js";import{a as $,N as F,A as P,n as K,b as Y,u as _,c as B,H as G,M as W,U as q}from"./UserProfileDropdown-B1LYtU9b.js";import{V as z}from"./VerticalMenuContent-BYTXLvKw.js";import{H as J,a as Q}from"./CloseButton-C6TjurSH.js";import{L as X}from"./LayoutBase-DYsZqErg.js";import"./index-I3kgkcpw.js";import"./floating-ui.react-V0az-mir.js";import"./index-Chjiymov.js";const Z=l=>{const{onChange:a,routeKey:s,activeKeys:r,onSetActiveKey:c,direction:d,navigationTree:n,userAuthority:o,mode:u,selectedMenu:m,t:y,...x}=l,{includedRouteTree:i}=$(n,s),S=({key:e,title:h,menu:D,translateKey:b})=>{a({title:h,menu:D,translateKey:b}),c([e])},j=({key:e})=>{a({}),c([e])};k.useEffect(()=>{i.type!==F&&!f(i)&&a({key:i.key,title:i.title,menu:i.subMenu,translateKey:i.translateKey})},[i.key]);const N=r&&r.length>0?r:f(m)?[]:[i.key];return t.jsxs("div",{...x,children:[t.jsx(g,{to:T.authenticatedEntryPath,className:"stacked-mini-nav-header flex items-center justify-center",style:{height:E},children:t.jsx(U,{imgClass:"max-h-10",mode:u,type:"streamline",className:R})}),t.jsx(I,{autoHide:!0,direction:d,children:t.jsx(p,{className:"px-4 pb-4",defaultActiveKeys:N,children:n.map(e=>t.jsx(P,{authority:e.authority,userAuthority:o,children:t.jsx("div",{title:y(e.translateKey,e.title),children:e.subMenu&&e.subMenu.length>0?t.jsx(p.MenuItem,{eventKey:e.key,className:"mb-2",onSelect:()=>S({key:e.key,title:e.title,menu:e.subMenu,translateKey:e.translateKey}),children:t.jsx("div",{className:"text-2xl",children:K[e.icon]})}):t.jsx(g,{to:e.path,className:"flex items-center h-full w-full",onClick:()=>j({key:e.key}),children:t.jsx(p.MenuItem,{eventKey:e.key,className:"mb-2",children:t.jsx("div",{className:"text-2xl",children:K[e.icon]})})})})},e.key))})})]})},ee=l=>{const{className:a,title:s,menu:r,routeKey:c,onCollapse:d,direction:n,translationSetup:o,userAuthority:u,...m}=l,y=()=>{d()};return t.jsxs("div",{className:H("h-full",a),...m,children:[t.jsxs("div",{className:"flex items-center justify-between gap-4 pl-6 pr-4",style:{height:E},children:[t.jsx("h5",{className:"font-bold",children:s}),t.jsxs("button",{type:"button",className:"close-button",onClick:y,children:[n===M&&t.jsx(J,{}),n===C&&t.jsx(Q,{})]})]}),t.jsx(I,{autoHide:!0,direction:n,children:t.jsx(z,{routeKey:c,navigationTree:r,translationSetup:o,userAuthority:u})})]})},te={width:V},se=({translationSetup:l=T.activeNavTranslation})=>{const{t:a}=Y(!l),[s,r]=k.useState({}),[c,d]=k.useState([]),n=v(e=>e.mode),o=v(e=>e.direction),u=w(e=>e.currentRouteKey),m=L(e=>e.user.authority),{larger:y}=_(),x=(e,h)=>`${e}-${h}`,i=e=>{r(e)},S=()=>{r({}),d([])},j=e=>{d(e)},N=()=>{let e={};const h=`${-A}px`;return o===M&&(e={marginLeft:h}),o===C&&(e={marginRight:h}),e};return t.jsx(t.Fragment,{children:y.md&&t.jsxs("div",{className:"stacked-side-nav",children:[t.jsx(Z,{className:`stacked-side-nav-mini ${x("stacked-side-nav-mini",n)}`,style:te,routeKey:u,activeKeys:c,mode:n,direction:o,navigationTree:B,userAuthority:m||[],selectedMenu:s,t:a,onChange:i,onSetActiveKey:j}),t.jsx("div",{className:`stacked-side-nav-secondary ${x("stacked-side-nav-secondary",n)}`,style:{width:A,...f(s)?N():{}},children:!f(s)&&t.jsx(ee,{title:a(s.translateKey,s.title),menu:s.menu,routeKey:u,direction:o,translationSetup:l,userAuthority:m||[],onCollapse:S})})]})})},ye=({children:l})=>{const{larger:a,smaller:s}=_();return t.jsx(X,{type:O,className:"app-layout-stacked-side flex flex-auto flex-col",children:t.jsxs("div",{className:"flex flex-auto min-w-0",children:[a.lg&&t.jsx(se,{}),t.jsxs("div",{className:"flex flex-col flex-auto min-h-screen min-w-0 relative w-full",children:[t.jsx(G,{className:"shadow dark:shadow-2xl",headerStart:t.jsx(t.Fragment,{children:s.lg&&t.jsx(W,{})}),headerEnd:t.jsx(t.Fragment,{children:t.jsx(q,{hoverable:!1})})}),t.jsx("div",{className:"h-full flex flex-auto flex-col",children:l})]})]})})};export{ye as default};
